{
  "ConnectionStrings": {
    "DbType": "MySql",
    "SqlConnection": "Server=114.55.177.197;Port=3306;Database=66in;Uid=root;Pwd=66^^66;CharSet=utf8;pooling=true;SslMode=None;Allow User Variables=true;Convert Zero Datetime=True;Allow Zero Datetime=True;"
  },
  "RedisConfig": {
    "Enabled": true,
    "ConnectionString": "116.62.214.239,connectTimeout=1000,connectRetry=1,syncTimeout=10000,DefaultDatabase=8"
  },
<<<<<<< HEAD
  "HealthChecksUI": {
    "HealthChecks": [
      {
        "Name": "Test Health",
        "Uri": "https://localhost:5000/health"
      }
    ],
    "EvaluationTimeinSeconds": 10,
    "MinimumSecondsBetweenFailureNotifications": 60
  },
  "CustomConfig": "ÕâÀïÊÇ»·¾³µÄÅäÖÃ",
=======
  //å¥åº·æ£€æŸ¥Rabbitmq
  "â€œEventBusConnectionâ€": "",
  //å¥åº·æ£€æŸ¥Redis
  "RedisConnectionString": "116.62.214.239,connectTimeout=1000,connectRetry=1,syncTimeout=10000,DefaultDatabase=8",
  //å¥åº·æ£€æŸ¥SqlServer
  "â€œConnectionStringâ€": "Data Source=.;Initial Catalog=HealthDatabase;User ID=sa;Password=123",
  //å¥åº·æ£€æŸ¥SqlæŒä¹…åŒ–æ•°æ®åº“
  "HealthStorageConnectionString": "Data Source=.;Initial Catalog=HealthDatabase;User ID=sa;Password=123",
  //"HealthChecksUI": {
  //  "HealthChecks": [
  //    {
  //      "Name": "Test Health",
  //      "Uri": "https://localhost:5000/health"
  //    }
  //  ],
  //  "EvaluationTimeinSeconds": 10,
  //  "MinimumSecondsBetweenFailureNotifications": 60
  //},
>>>>>>> ccc8456200150c7c0eaa6f0df8bd644d03f01b1a
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "AllowedHosts": "*",
  //ä¸­é—´ä»¶
  "Middleware": {
    //è®°å½•è¯·æ±‚å’Œå“åº”æ•°æ®
    "RequestResponseLog": {
      "Enabled": true,
      "IgnoreApis": ""
    },
    //è®°å½•IPè¯·æ±‚æ•°æ®
    "IPLog": {
      "Enabled": true
    }
  },
  "IpRateLimiting": {
    //falseï¼Œåˆ™å…¨å±€å°†åº”ç”¨é™åˆ¶ï¼Œå¹¶ä¸”ä»…åº”ç”¨å…·æœ‰ä½œä¸ºç«¯ç‚¹çš„è§„åˆ™*ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è®¾ç½®æ¯ç§’5æ¬¡è°ƒç”¨çš„é™åˆ¶ï¼Œåˆ™å¯¹ä»»ä½•ç«¯ç‚¹çš„ä»»ä½•HTTPè°ƒç”¨éƒ½å°†è®¡å…¥è¯¥é™åˆ¶
    //trueï¼Œ åˆ™é™åˆ¶å°†åº”ç”¨äºæ¯ä¸ªç«¯ç‚¹ï¼Œå¦‚{HTTP_Verb}{PATH}ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¸º*:/api/valueså®¢æˆ·ç«¯è®¾ç½®æ¯ç§’5ä¸ªå‘¼å«çš„é™åˆ¶ï¼Œ
    "EnableEndpointRateLimiting": false,
    //falseï¼Œæ‹’ç»çš„APIè°ƒç”¨ä¸ä¼šæ·»åŠ åˆ°è°ƒç”¨æ¬¡æ•°è®¡æ•°å™¨ä¸Š;å¦‚ å®¢æˆ·ç«¯æ¯ç§’å‘å‡º3ä¸ªè¯·æ±‚å¹¶ä¸”æ‚¨è®¾ç½®äº†æ¯ç§’ä¸€ä¸ªè°ƒç”¨çš„é™åˆ¶ï¼Œåˆ™æ¯åˆ†é’Ÿæˆ–æ¯å¤©è®¡æ•°å™¨ç­‰å…¶ä»–é™åˆ¶å°†ä»…è®°å½•ç¬¬ä¸€ä¸ªè°ƒç”¨ï¼Œå³æˆåŠŸçš„APIè°ƒç”¨ã€‚å¦‚æœæ‚¨å¸Œæœ›è¢«æ‹’ç»çš„APIè°ƒç”¨è®¡å…¥å…¶ä»–æ—¶é—´çš„æ˜¾ç¤ºï¼ˆåˆ†é’Ÿï¼Œå°æ—¶ç­‰ï¼‰ï¼Œåˆ™å¿…é¡»è®¾ç½®StackBlockedRequestsä¸ºtrueã€‚
    "StackBlockedRequests": false,
    //Kestrel æœåŠ¡å™¨èƒŒåæ˜¯ä¸€ä¸ªåå‘ä»£ç†ï¼Œå¦‚æœä½ çš„ä»£ç†æœåŠ¡å™¨ä½¿ç”¨ä¸åŒçš„é¡µçœ‰ç„¶åæå–å®¢æˆ·ç«¯IP X-Real-IPä½¿ç”¨æ­¤é€‰é¡¹æ¥è®¾ç½®
    "RealIpHeader": "X-Real-IP",
    //å–ç™½åå•çš„å®¢æˆ·ç«¯IDã€‚å¦‚æœæ­¤æ ‡å¤´ä¸­å­˜åœ¨å®¢æˆ·ç«¯IDå¹¶ä¸”ä¸ClientWhitelistä¸­æŒ‡å®šçš„å€¼åŒ¹é…ï¼Œåˆ™ä¸åº”ç”¨é€Ÿç‡é™åˆ¶ã€‚
    //"ClientIdHeader": "X-ClientId",
    "ClientIdHeader": "appid",
    //é™åˆ¶çŠ¶æ€ç 
    "HttpStatusCode": 429,
    //IPç™½åå•:æ”¯æŒIp v4å’Œv6
    "IpWhitelist": [ "0.0.0.1", "192.168.0.0/24" ],
    //ç«¯ç‚¹ç™½åå•:æ”¯æŒå„ç§è¯·æ±‚ï¼›
    "EndpointWhitelist": [ "get:/ipclient/str", "*:/ipclient/str2" ],
    ////å®¢æˆ·ç«¯ç™½åå•
    //"ClientWhitelist": [ "dev-id-1", "dev-id-2" ],
    //é€šç”¨è§„åˆ™
    "QuotaExceededResponse": {
      "Content": "{{\"code\":429,\"msg\":\"Visit too frequently, please try again later\",\"data\":null}}",
      "ContentType": "application/json;utf-8",
      "StatusCode": 429
    },
    "GeneralRules": [
      {
        //ç«¯ç‚¹è·¯å¾„
        "Endpoint": "*",
        //æ—¶é—´æ®µï¼Œæ ¼å¼ï¼š{æ•°å­—}{å•ä½}ï¼›å¯ä½¿ç”¨å•ä½ï¼šs, m, h, d
        "Period": "1s",
        //é™åˆ¶
        "Limit": 20
      },
      //15åˆ†é’Ÿåªèƒ½è°ƒç”¨100æ¬¡
      {
        "Endpoint": "*",
        "Period": "15m",
        "Limit": 100
      },
      //12Håªèƒ½è°ƒç”¨1000
      {
        "Endpoint": "*",
        "Period": "12h",
        "Limit": 1000
      },
      //7å¤©åªèƒ½è°ƒç”¨10000æ¬¡
      {
        "Endpoint": "*",
        "Period": "7d",
        "Limit": 10000
      }
    ]
  },
  "IpRateLimitPolicies": {
    //ipè§„åˆ™
    "IpRules": [
      {
        //IP
        "Ip": "127.0.0.9",
        //è§„åˆ™å†…å®¹
        "Rules": [
          //1sè¯·æ±‚10æ¬¡
          {
            "Endpoint": "*",
            "Period": "1s",
            "Limit": 10
          },
          //15åˆ†é’Ÿè¯·æ±‚200æ¬¡
          {
            "Endpoint": "*",
            "Period": "15m",
            "Limit": 200
          }
        ]
      },
      {
        //ipæ”¯æŒè®¾ç½®å¤šä¸ª
        "Ip": "192.168.3.22/25",
        "Rules": [
          //1ç§’è¯·æ±‚5æ¬¡
          {
            "Endpoint": "*",
            "Period": "1s",
            "Limit": 5
          },
          //15åˆ†é’Ÿè¯·æ±‚150æ¬¡
          {
            "Endpoint": "*",
            "Period": "15m",
            "Limit": 150
          },
          //12å°æ—¶è¯·æ±‚500æ¬¡
          {
            "Endpoint": "*",
            "Period": "12h",
            "Limit": 500
          }
        ]
      }
    ]
  },
  "ClientRateLimitPolicies": {
    "ClientRules": [
      {
        "ClientId": "1",
        "Rules": [
          {
            "Endpoint": "*",
            "Period": "10s",
            "Limit": 2
          },
          {
            "Endpoint": "*",
            "Period": "15m",
            "Limit": 200
          }
        ]
      },
      {
        "ClientId": "client-id-2",
        "Rules": [
          {
            "Endpoint": "*",
            "Period": "1s",
            "Limit": 5
          },
          {
            "Endpoint": "*",
            "Period": "15m",
            "Limit": 150
          },
          {
            "Endpoint": "*",
            "Period": "12h",
            "Limit": 500
          }
        ]
      }
    ]
  }
}
